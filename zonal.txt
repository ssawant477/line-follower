#define F_CPU 12000000UL
#include<avr/io.h>
#include<util/delay.h>
int main()
{
DDRB=0b11111111;
DDRC=0b11100000;

while(1)
{
if(PINC==0b00011111)
{
uturn();
stop();
}
if(PINC==0b00001110)
{
left();
}
if(PINC==0b00000100)
{
forward();
}
if((PINC==0b00001000)||(PINC==0b00010000)||(PINC==0b00001100)||(PINC==0b00011110))
{
left();
}
if((PINC==0b00000001)||(PINC==0b00000110)||(PINC==0b00000010)||(PINC==0b00001111))
{
right();
}

if(PINC==0b00011011)
{
right();
}
if(PINC==0b00010010)
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
right();
}
}
}
if(PINC==0b00010011)
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
right();
}
}
}
if((PINC==0b00000000))
{
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
uturn();
}
}
}
if((PINC==0b00011001)||(PINC==0b00010001)||(PINC==0b00001010))
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
left();
}
}
}
if((PINC==0b00011010))
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
left();
}
}
}
if((PINC==0b00011000)||(PINC==0b00011100))
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
left();
}
}
}
if(PINC==0b00001011)
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
right();
}
}
}
if((PINC==0b00000011)||(PINC==0b00000111))
{
backward();
while(PINC!=0b00000100)
{
if(PINC==0b00011111)
{
stop();
}
else
{
right();
}
}
}
if(PINC==0b00010001)
{
backward();
}
}
return 0;
}
void forward()
{
PORTB=0b00000101;
_delay_us(85);
PORTB=0b00000000;
_delay_us(15);
}
void left()
{
PORTB=0b00000100;
_delay_us(70);
PORTB=0b00000000;
_delay_us(30);
}
void right()
{
PORTB=0b00000001;
_delay_us(70);
PORTB=0b00000000;
_delay_us(30);
}
void uturn()
{
PORTB=0b00000110;
_delay_us(70);
PORTB=0b00000000;
_delay_us(30);

}
void stop()
{
PORTB=0b00000000;
_delay_ms(500);
PORTB=0b00001111;
_delay_ms(500);
PORTB=0b00000000;
_delay_ms(500);
PORTB=0b00001111;
_delay_ms(500);
PORTB=0b00000000;
_delay_ms(500);
}
void backward()
{
PORTB=0b00001010;
_delay_us(50);

}
